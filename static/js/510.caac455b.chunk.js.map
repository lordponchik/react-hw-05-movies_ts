{"version":3,"file":"static/js/510.caac455b.chunk.js","mappings":"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","sources":["webpack://react-hw-05-movies_ts/./src/components/InformationMessage/InformationMessage.module.css?b207","components/InformationMessage/InformationMessage.tsx","services/api.ts","webpack://react-hw-05-movies_ts/./src/views/MovieDetailsPageView/MovieDetailsPageView.module.css?8197","views/MovieDetailsPageView/MovieDetailsPageView.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"message\":\"InformationMessage_message__2XMt6\",\"animMessage\":\"InformationMessage_animMessage__Zgqpm\"};","import s from './InformationMessage.module.css';\r\n\r\nexport default function InformationMessage() {\r\n  return <p className={s.message}>Unfortunately the requested information is not available.</p>;\r\n}\r\n","const options = {\r\n  method: 'GET',\r\n  headers: {\r\n    accept: 'application/json',\r\n    Authorization:\r\n      'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIxNzJjNjgwZTU1OGJkMmM2YjkwMmM4MGIyZDVlMDc3ZCIsIm5iZiI6MTczMDQ3NDM2NC43MzMxNzE1LCJzdWIiOiI2NDgxY2M5Y2UyNzI2MDAwZThiZjRlYjQiLCJzY29wZXMiOlsiYXBpX3JlYWQiXSwidmVyc2lvbiI6MX0.5dCuWIPkc-FoQqtFcC5mms7ke4vYd9VzbOaT7ZD_h1c',\r\n  },\r\n};\r\n\r\nasync function fetchMoviesAPI(route: string) {\r\n  const request = await fetch(`https://api.themoviedb.org/3/${route}`, options);\r\n  const results = await request.json();\r\n\r\n  return results;\r\n}\r\n\r\nexport async function fetchTrendingMovies() {\r\n  return await fetchMoviesAPI('trending/movie/day?language=en-US');\r\n}\r\n\r\nexport async function fetchMovies(q: string) {\r\n  return await fetchMoviesAPI(`search/movie?query=${q}&include_adult=false&language=en-US&page=1`);\r\n}\r\n\r\nexport async function fetchMoviesDetails(id: number) {\r\n  return await fetchMoviesAPI(`movie/${id}?language=en-US`);\r\n}\r\n\r\nexport async function fetchMoviesCredits(id: number) {\r\n  return await fetchMoviesAPI(`movie/${id}/credits?language=en-US`);\r\n}\r\n\r\nexport async function fetchMoviesReviews(id: number) {\r\n  return await fetchMoviesAPI(`movie/${id}/reviews?language=en-US&page=1`);\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"section\":\"MovieDetailsPageView_section__rr9Qj\",\"linkBack\":\"MovieDetailsPageView_linkBack__ESywa\",\"movieWrapper\":\"MovieDetailsPageView_movieWrapper__KRHF0\",\"imgWrapper\":\"MovieDetailsPageView_imgWrapper__LY-Kp\",\"movieDescription\":\"MovieDetailsPageView_movieDescription__QVM2y\",\"movieTitle\":\"MovieDetailsPageView_movieTitle__I6Krq\",\"userScore\":\"MovieDetailsPageView_userScore__0ozkB\",\"overviewTitle\":\"MovieDetailsPageView_overviewTitle__0QWa5\",\"overview\":\"MovieDetailsPageView_overview__HZyQ8\",\"genresTitle\":\"MovieDetailsPageView_genresTitle__aIvbd\",\"genres\":\"MovieDetailsPageView_genres__wNmbe\",\"addtionalInfo\":\"MovieDetailsPageView_addtionalInfo__8lsZS\",\"detailsNav\":\"MovieDetailsPageView_detailsNav__vMDQ8\",\"detailsItem\":\"MovieDetailsPageView_detailsItem__JceAW\",\"detailsLink\":\"MovieDetailsPageView_detailsLink__qz77T\",\"detailsLink__active\":\"MovieDetailsPageView_detailsLink__active__lOfNS MovieDetailsPageView_detailsLink__qz77T\"};","import {\r\n  Link,\r\n  NavLink,\r\n  Outlet,\r\n  useLocation,\r\n  useParams,\r\n} from \"react-router-dom\";\r\nimport { fetchMoviesDetails } from \"../../services/api\";\r\nimport s from \"./MovieDetailsPageView.module.css\";\r\nimport InformationMessage from \"../../components/InformationMessage/InformationMessage\";\r\nimport Loader from \"../../components/Loader/Loader\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\n\r\ninterface IGenres {\r\n  id: number;\r\n  name: string;\r\n}\r\n\r\ninterface IMovieDetails {\r\n  title: string;\r\n  name: string;\r\n  original_name: string;\r\n  poster_path: string;\r\n  vote_average: number;\r\n  overview: string;\r\n  genres: IGenres[];\r\n  release_date: string;\r\n  [key: string]: string | number | IGenres[];\r\n}\r\n\r\nconst img_url =\r\n  \"https://images.unsplash.com/photo-1625315268158-bb9ef970ca77?q=80&w=2397&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D\";\r\n\r\nasync function requestMoviesDetails(movieId: number) {\r\n  const results = await fetchMoviesDetails(movieId);\r\n\r\n  return results;\r\n}\r\n\r\nexport default function MovieDetailsPageView() {\r\n  const { movieId } = useParams();\r\n  const { data, isPending, isError } = useQuery<IMovieDetails>({\r\n    queryKey: [\"moviesDetails\", movieId],\r\n    queryFn: () => requestMoviesDetails(Number(movieId)),\r\n    refetchOnWindowFocus: false,\r\n  });\r\n  const location = useLocation();\r\n  const backUrl = location?.state?.from ?? \"/\";\r\n  const stateFrom = backUrl;\r\n\r\n  return (\r\n    <>\r\n      {isPending && <Loader />}\r\n      {(isError || data === undefined) && <InformationMessage />}\r\n      {data ? (\r\n        <section className={s.section}>\r\n          <Link to={backUrl} className={s.linkBack}>\r\n            &#8604; Go back\r\n          </Link>\r\n          <div className={s.movieWrapper}>\r\n            <div className={s.imgWrapper}>\r\n              <img\r\n                src={\r\n                  data.poster_path\r\n                    ? `https://image.tmdb.org/t/p/w500/${data.poster_path}`\r\n                    : img_url\r\n                }\r\n                alt=\"\"\r\n              />\r\n            </div>\r\n            <div className={s.movieDescription}>\r\n              <h1 className={s.movieTitle}>\r\n                {data.title || data.name || data.original_name}{\" \"}\r\n                {`(${data.release_date.split(\"-\")[0]})`}\r\n              </h1>\r\n              <p className={s.userScore}>\r\n                User score:\r\n                {data.vote_average > 0\r\n                  ? ` ${Math.trunc(data.vote_average * 10)}%`\r\n                  : \" we wate\"}\r\n              </p>\r\n\r\n              {data.overview && (\r\n                <>\r\n                  <h2 className={s.overviewTitle}>Overview</h2>\r\n                  <p className={s.overview}>{data.overview}</p>\r\n                </>\r\n              )}\r\n              {data.genres && (\r\n                <>\r\n                  <h2 className={s.genresTitle}>Genres</h2>\r\n                  <ul className={s.genres}>\r\n                    {data.genres.map(({ id, name }) => {\r\n                      return <li key={id}>{name}</li>;\r\n                    })}\r\n                  </ul>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <h3 className={s.addtionalInfo}>Additional information</h3>\r\n            <ul className={s.detailsNav}>\r\n              <li className={s.detailsItem}>\r\n                <NavLink\r\n                  to=\"cast\"\r\n                  className={({ isActive }) => {\r\n                    return isActive ? s.detailsLink__active : s.detailsLink;\r\n                  }}\r\n                  state={{ from: stateFrom }}\r\n                >\r\n                  Cast\r\n                </NavLink>\r\n              </li>\r\n              <li>\r\n                <NavLink\r\n                  to=\"reviews\"\r\n                  className={({ isActive }) => {\r\n                    return isActive ? s.detailsLink__active : s.detailsLink;\r\n                  }}\r\n                  state={{ from: stateFrom }}\r\n                >\r\n                  Reviews\r\n                </NavLink>\r\n              </li>\r\n            </ul>\r\n\r\n            <Outlet />\r\n          </div>\r\n        </section>\r\n      ) : (\r\n        <InformationMessage />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"names":["InformationMessage","_jsx","className","s","message","children","options","method","headers","accept","Authorization","async","fetchMoviesAPI","route","request","fetch","json","fetchTrendingMovies","fetchMovies","q","fetchMoviesDetails","id","fetchMoviesCredits","fetchMoviesReviews","img_url","MovieDetailsPageView","_location$state$from","_location$state","movieId","useParams","data","isPending","isError","useQuery","queryKey","queryFn","requestMoviesDetails","Number","refetchOnWindowFocus","location","useLocation","backUrl","state","from","stateFrom","_jsxs","_Fragment","Loader","undefined","section","Link","to","linkBack","movieWrapper","imgWrapper","src","poster_path","alt","movieDescription","movieTitle","title","name","original_name","release_date","split","userScore","vote_average","Math","trunc","overview","overviewTitle","genres","genresTitle","map","_ref","addtionalInfo","detailsNav","detailsItem","NavLink","_ref2","isActive","detailsLink__active","detailsLink","_ref3","Outlet"],"sourceRoot":""}